<div class="w3-container w3-card-4 w3-light-grey w3-text-black w3-margin">
    <h2 class="w3-center">Perfil de Usuario</h2>
    {{#user}}
        <div class="w3-section">
            <div class="w3-section d-flex justify-content-center">
                <label for="profile_pic"></label>
                <img id="profile_pic" class="profile-pic img-thumbnail" src="data:image/jpeg;base64,{{profile_pic}}" style="width: 200px; height: 200px;"> <br>
            </div>
            <b><p class="text-center">Puntaje máximo: {{maxScore}}</p></b>
            <label for="username"><b>Usuario</b></label>
            <p id="username">{{username}}</p>
            <label for="email"><b>Email</b></label>
            <p id="email">{{email}}</p>
            <label for="name"><b>Nombre</b></label>
            <p id="name">{{name}}</p>
            <label for="surname"><b>Apellidos</b></label>
            <p id="surname">{{surname}}</p>
            <label for="birth_year"><b>Año de nacimiento</b></label>
            <p id="birth_year">{{birth_year}}</p>
            <label for="gender"><b>Género</b></label>
            <p id="gender">{{gender}}</p>
            <label for="gender"><b>País</b></label>
            <p id="gender">{{country}}</p>
            <label for="gender"><b>Ciudad</b></label>
            <p id="gender">{{city}}</p>

            <input type="hidden" name="latitude" id="latitude" value="{{latitude}}">
            <input type="hidden" name="longitude" id="longitude" value="{{longitude}}">
            <div id="map"></div>
            <br>
            <br>

            <!-- Contenedor para el código QR -->
            <div class="text-center">
                <h4>Comparte este perfil</h4>
                <div id="qrcode" class="d-flex justify-content-center"></div>
            </div>

            <br>


            <div class="container">
                <div class="row">
                    <!-- Columna de partidas -->
                    <div class="col">
                        <h2 class="text-center">Partidas</h2>
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th scope="col" class="text-center">Partida</th>
                                <th scope="col" class="text-center">Puntaje</th>
                            </tr>
                            </thead>
                            <tbody>
                            {{#partidas}}
                                <tr>
                                    <td class="text-center">{{fecha_creacion}}</td>
                                    <td class="text-center">{{puntaje}}</td>
                                </tr>
                            {{/partidas}}
                            </tbody>
                        </table>
                        <div class="text-center">
                            <a href="/Home" class="btn btn-primary">Volver a Inicio</a>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    {{/user}}
</div>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="../public/map.js"></script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDnX8zHMgCJGcL6D9KGRkkzYGOV2v-xv4c&callback=initMap">
</script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://davidshimjs.github.io/qrcodejs/qrcode.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Obtener la URL del perfil desde los datos pasados a la vista
        var profileUrl =  window.location.href;


        // Generar el QR code
        var qrcode = new QRCode(document.getElementById("qrcode"), {
            text: profileUrl,
            width: 200,
            height: 200,

        });
    });
</script>
